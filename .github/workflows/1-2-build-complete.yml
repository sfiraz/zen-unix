name: "ğŸš€ Zen Unix - Complete Build"

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Zen Unix Version'
        required: true
        default: '1.0.0'
      features:
        description: 'Build Features'
        required: true  
        default: 'full'
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

env:
  ZEN_VERSION: '1.0.0'
  BUILD_ARCH: 'aarch64'
  KERNEL_VERSION: '6.6.9'
  MUSL_VERSION: '1.2.4'
  BUSYBOX_VERSION: '1.36.1'
  BINUTILS_VERSION: '2.42'

jobs:
  build-complete:
    runs-on: ubuntu-latest
    timeout-minutes: 120
    
    steps:
    # ========== INITIAL SETUP ==========
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 1

    - name: Setup build environment
      run: |
        echo "ğŸ”§ Setting up build environment for Zen Unix ${{ env.ZEN_VERSION }}"
        sudo apt-get update
        sudo apt-get install -y \
          gcc-aarch64-linux-gnu \
          g++-aarch64-linux-gnu \
          binutils-aarch64-linux-gnu \
          build-essential \
          libncurses-dev \
          bc \
          flex \
          bison \
          libssl-dev \
          libelf-dev \
          wget \
          curl \
          xz-utils \
          git \
          make \
          cmake \
          autoconf \
          automake \
          libtool \
          pkg-config \
          qemu-system-aarch64 \
          qemu-user-static \
          dosfstools \
          e2fsprogs \
          parted \
          udev \
          file

    - name: Create build directories
      run: |
        mkdir -p {sources,build,rootfs,output}
        mkdir -p rootfs/{bin,dev,etc,proc,sys,usr/{bin,lib,local,share},var/{cache,log,lib},tmp,home,root,boot,mnt,media,opt,run}
        mkdir -p rootfs/etc/{apk,profile.d,init.d}
        mkdir -p rootfs/var/cache/apk

    # ========== DOWNLOAD SOURCES ==========
    - name: Download sources dengan retry mechanism
      run: |
        cd sources
        echo "ğŸ“¦ Downloading source packages for Zen Unix..."
        
        # Function untuk download dengan retry
        download_with_retry() {
          local url=$1
          local output=$2
          local max_retries=3
          local retry_count=0
          
          while [ $retry_count -lt $max_retries ]; do
            if wget --timeout=60 --tries=1 -O "$output" "$url"; then
              echo "âœ… Downloaded: $output"
              return 0
            fi
            retry_count=$((retry_count + 1))
            echo "âŒ Download failed, retry $retry_count/$max_retries: $url"
            sleep 5
          done
          echo "ğŸ’¥ Failed to download: $url"
          return 1
        }

        # Download semua sources
        download_with_retry "https://mirror.koddos.net/gnu/binutils/binutils-${{ env.BINUTILS_VERSION }}.tar.xz" "binutils-${{ env.BINUTILS_VERSION }}.tar.xz"
        download_with_retry "https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-${{ env.KERNEL_VERSION }}.tar.xz" "linux-${{ env.KERNEL_VERSION }}.tar.xz"
        download_with_retry "https://musl.libc.org/releases/musl-${{ env.MUSL_VERSION }}.tar.gz" "musl-${{ env.MUSL_VERSION }}.tar.gz"
        download_with_retry "https://busybox.net/downloads/busybox-${{ env.BUSYBOX_VERSION }}.tar.bz2" "busybox-${{ env.BUSYBOX_VERSION }}.tar.bz2"
        
        # Verify checksums
        echo "ğŸ” Verifying downloaded files..."
        for file in *; do
          if [ -f "$file" ]; then
            size=$(stat -c%s "$file")
            if [ $size -gt 1000 ]; then
              echo "âœ… $file: $size bytes"
            else
              echo "âŒ $file: File too small or corrupted"
              exit 1
            fi
          fi
        done
        cd ..

    # ========== TOOLCHAIN BUILD ==========
    - name: Build Binutils cross-compiler
      run: |
        echo "ğŸ› ï¸ Building Binutils ${{ env.BINUTILS_VERSION }} for ${{ env.BUILD_ARCH }}..."
        tar xf sources/binutils-${{ env.BINUTILS_VERSION }}.tar.xz
        cd binutils-${{ env.BINUTILS_VERSION }}
        
        mkdir build && cd build
        ../configure \
          --target=${{ env.BUILD_ARCH }}-linux-gnu \
          --prefix=/usr \
          --disable-werror \
          --disable-multilib \
          --enable-plugins \
          --enable-threads
        
        make -j$(nproc) all
        make DESTDIR=$PWD/install install
        
        # Install ke sistem build
        sudo cp -r install/* /
        cd ../..
        echo "âœ… Binutils build completed"

    - name: Build Linux Kernel Headers
      run: |
        echo "ğŸ“‹ Building Linux ${{ env.KERNEL_VERSION }} headers..."
        tar xf sources/linux-${{ env.KERNEL_VERSION }}.tar.xz
        cd linux-${{ env.KERNEL_VERSION }}
        
        make ARCH=arm64 CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- defconfig
        make ARCH=arm64 CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- headers_install INSTALL_HDR_PATH=$PWD/headers
        
        # Install headers ke sysroot
        sudo mkdir -p /usr/${{ env.BUILD_ARCH }}-linux-gnu/include
        sudo cp -r headers/include/* /usr/${{ env.BUILD_ARCH }}-linux-gnu/include/
        cd ..
        echo "âœ… Kernel headers installed"

    # ========== KERNEL BUILD ==========
    - name: Build Linux Kernel dengan optimasi
      run: |
        echo "ğŸ§ Building Linux Kernel ${{ env.KERNEL_VERSION }} dengan optimasi..."
        cd linux-${{ env.KERNEL_VERSION }}
        
        # Config dasar
        make ARCH=arm64 CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- defconfig
        
        # Optimasi untuk size dan speed
        echo "âš¡ Applying kernel optimizations..."
        ./scripts/config --disable DEBUG_INFO
        ./scripts/config --disable DEBUG_KERNEL
        ./scripts/config --disable DEBUG_FS
        ./scripts/config --disable PROFILING
        ./scripts/config --disable KPROBES
        ./scripts/config --disable UPROBES
        ./scripts/config --disable KGDB
        ./scripts/config --disable SCHED_DEBUG
        ./scripts/config --disable FTRACE
        ./scripts/config --disable FUNCTION_TRACER
        ./scripts/config --disable DYNAMIC_DEBUG
        ./scripts/config --disable MODULES
        ./scripts/config --disable IKCONFIG
        ./scripts/config --disable AUDIT
        ./scripts/config --disable SECURITY
        ./scripts/config --disable NETWORK_FILESYSTEMS
        ./scripts/config --disable WIRELESS
        ./scripts/config --disable NFC
        ./scripts/config --disable BLUETOOTH
        ./scripts/config --disable DRM
        ./scripts/config --disable SOUND
        ./scripts/config --disable HID
        ./scripts/config --disable USB
        ./scripts/config --disable PCI
        ./scripts/config --disable IOMMU_SUPPORT
        ./scripts/config --disable VIRTUALIZATION
        
        # Enable essentials
        ./scripts/config --enable DEVTMPFS
        ./scripts/config --enable DEVTMPFS_MOUNT
        ./scripts/config --enable TTY
        ./scripts/config --enable SERIAL_AMBA_PL011
        ./scripts/config --enable SERIAL_AMBA_PL011_CONSOLE
        ./scripts/config --enable EXT4_FS
        ./scripts/config --enable VFAT_FS
        ./scripts/config --enable MSDOS_FS
        ./scripts/config --enable FAT_FS
        ./scripts/config --enable NLS_CODEPAGE_437
        ./scripts/config --enable NLS_ISO8859_1
        
        # Finalize config
        make ARCH=arm64 CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- olddefconfig
        
        echo "ğŸš€ Compiling kernel..."
        time make ARCH=arm64 CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- -j$(nproc)
        
        # Copy kernel image
        cp arch/arm64/boot/Image ../output/zen-kernel
        cd ..
        echo "âœ… Kernel build completed"

    # ========== MUSL LIBC BUILD ==========
    - name: Build musl libc
      run: |
        echo "ğŸ“š Building musl libc ${{ env.MUSL_VERSION }}..."
        tar xf sources/musl-${{ env.MUSL_VERSION }}.tar.gz
        cd musl-${{ env.MUSL_VERSION }}
        
        ./configure \
          --prefix=/usr \
          --target=${{ env.BUILD_ARCH }}-linux-gnu \
          --disable-shared \
          --enable-static
        
        make -j$(nproc)
        make DESTDIR=$PWD/install install
        
        # Copy ke rootfs
        cp -r install/usr/* ../rootfs/usr/
        cd ..
        echo "âœ… musl libc installed"

    # ========== BUSYBOX BUILD ==========
    - name: Build BusyBox static
      run: |
        echo "ğŸ“¦ Building BusyBox ${{ env.BUSYBOX_VERSION }} static..."
        tar xf sources/busybox-${{ env.BUSYBOX_VERSION }}.tar.bz2
        cd busybox-${{ env.BUSYBOX_VERSION }}
        
        # Config dasar
        make CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- defconfig
        
        # Modifikasi config untuk static build
        sed -i 's/CONFIG_STATIC=.*/CONFIG_STATIC=y/' .config
        sed -i 's/CONFIG_FEATURE_IPV6=.*/# CONFIG_FEATURE_IPV6 is not set/' .config
        sed -i 's/CONFIG_INETD=.*/# CONFIG_INETD is not set/' .config
        sed -i 's/CONFIG_TELNETD=.*/# CONFIG_TELNETD is not set/' .config
        sed -i 's/CONFIG_FEATURE_TELNETD_STANDALONE=.*/# CONFIG_FEATURE_TELNETD_STANDALONE is not set/' .config
        
        # Auto-answer prompts
        yes "" | make CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- oldconfig
        
        echo "ğŸ”¨ Compiling BusyBox..."
        time make CROSS_COMPILE=${{ env.BUILD_ARCH }}-linux-gnu- -j$(nproc)
        
        # Install ke rootfs
        cp busybox ../rootfs/bin/
        chmod +x ../rootfs/bin/busybox
        cd ..
        echo "âœ… BusyBox build completed"

    - name: Setup BusyBox symlinks
      run: |
        echo "ğŸ”— Creating BusyBox symlinks..."
        cd rootfs/bin
        
        # Create symlinks untuk semua applets
        ./busybox --list | while read app; do
          if [ ! -e "$app" ] && [ "$app" != "busybox" ]; then
            ln -s busybox "$app"
          fi
        done
        cd ../..
        echo "âœ… BusyBox symlinks created"

    # ========== ALPINE APK SETUP ==========
    - name: Setup Alpine APK package manager
      run: |
        echo "ğŸ“¥ Setting up Alpine APK package manager..."
        
        # Download APK tools static
        wget -O apk-tools-static.apk http://dl-cdn.alpinelinux.org/alpine/v3.19/main/aarch64/apk-tools-static-2.14.0-r2.apk
        tar -xzf apk-tools-static.apk
        cp sbin/apk.static rootfs/sbin/
        chmod +x rootfs/sbin/apk.static
        
        # Setup APK repositories
        mkdir -p rootfs/etc/apk
        cat > rootfs/etc/apk/repositories << EOF
http://dl-cdn.alpinelinux.org/alpine/v3.19/main
http://dl-cdn.alpinelinux.org/alpine/v3.19/community
EOF
        
        # Setup APK keys
        mkdir -p rootfs/etc/apk/keys
        wget -O alpine-keys.apk http://dl-cdn.alpinelinux.org/alpine/v3.19/main/aarch64/alpine-keys-2.4-r1.apk
        tar -xzf alpine-keys.apk
        cp etc/apk/keys/* rootfs/etc/apk/keys/
        
        echo "âœ… APK setup completed"

    - name: Install Alpine packages dengan QEMU
      run: |
        echo "ğŸ“¦ Installing Alpine packages dengan QEMU chroot..."
        
        # Setup QEMU static
        cp /usr/bin/qemu-aarch64-static rootfs/usr/bin/
        chmod +x rootfs/usr/bin/qemu-aarch64-static
        
        # Setup basic system files
        echo "nameserver 8.8.8.8" > rootfs/etc/resolv.conf
        echo "nameserver 1.1.1.1" >> rootfs/etc/resolv.conf
        echo "zen-unix" > rootfs/etc/hostname
        
        # Setup fstab dasar
        cat > rootfs/etc/fstab << EOF
/dev/root / ext4 defaults 0 1
proc /proc proc defaults 0 0
tmpfs /tmp tmpfs defaults 0 0
EOF

        # Update dan install base system
        sudo chroot rootfs /sbin/apk.static update
        sudo chroot rootfs /sbin/apk.static add --no-cache alpine-base
        
        # Install packages utama
        echo "ğŸ› ï¸ Installing main packages..."
        sudo chroot rootfs /sbin/apk add --no-cache \
          bash curl wget nano htop neofetch git openssh tmux tree bat ripgrep fd fzf jq \
          figlet lolcat cmatrix go build-base cmake pkgconfig util-linux e2fsprogs kbd kmod \
          iproute2 iputils dhcpcd openssh-server sudo dropbear dropbear-scp
        
        # Clean APK cache
        sudo chroot rootfs /sbin/apk cache clean
        
        # Remove QEMU
        rm rootfs/usr/bin/qemu-aarch64-static
        
        echo "âœ… Alpine packages installed"

    # ========== SYSTEM CONFIGURATION ==========
    - name: Create system initialization
      run: |
        echo "ğŸ¯ Creating system initialization..."
        
        # Create init script
        cat > rootfs/init << 'EOF'
#!/bin/bash
# Zen Unix Init Script
# by Wildan Hermawan - https://github.com/sfiraz

export PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin

# Mount filesystems
mount -t proc none /proc
mount -t sysfs none /sys
mount -t devtmpfs none /dev
mount -t tmpfs none /tmp

# Create essential device nodes
mknod /dev/console c 5 1 2>/dev/null || true
mknod /dev/null c 1 3 2>/dev/null || true
mknod /dev/zero c 1 5 2>/dev/null || true
mknod /dev/random c 1 8 2>/dev/null || true

# Setup network
mkdir -p /var/run/dhcpcd
ip link set lo up

# Start services
if [ -f /usr/sbin/sshd ]; then
    /usr/sbin/sshd &
    echo "ğŸ” SSH server started"
fi

if [ -f /usr/sbin/dropbear ]; then
    /usr/sbin/dropbear -R &
    echo "ğŸ” Dropbear SSH started"
fi

# Display welcome message
clear
echo "================================================"
figlet "Zen Unix" 2>/dev/null || echo "ZEN UNIX"
echo "================================================"
echo "ğŸ§  ARM64 Linux Distro by Wildan Hermawan"
echo "ğŸ“±  GitHub: https://github.com/sfiraz"
echo "ğŸš€  Version: $ZEN_VERSION"
echo "ğŸ’»  Kernel: $(uname -r)"
echo "ğŸ”§  Packages: Alpine + APK"
echo "================================================"
echo ""

# Start shell
export PS1="\[\033[1;32m\]\u@zen-unix\[\033[0m\]:\[\033[1;34m\]\w\[\033[0m\]\$ "
exec /bin/bash
EOF

        chmod +x rootfs/init
        echo "âœ… Init script created"

    - name: Create user environment
      run: |
        echo "ğŸ¨ Creating user environment..."
        
        # Create .bashrc untuk root
        cat > rootfs/root/.bashrc << 'EOF'
# Zen Unix Custom Bashrc

export PS1="\[\033[1;32m\]\u@zen-unix\[\033[0m\]:\[\033[1;34m\]\w\[\033[0m\]\$ "
export TERM=xterm-256color

# Aliases untuk productivity
alias ls='ls --color=auto'
alias ll='ls -la'
alias la='ls -A'
alias l='ls -CF'
alias grep='grep --color=auto'
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias cat='bat'
alias find='fd'
alias ps='ps auxf'
alias top='htop'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# Development aliases
alias g='git'
alias gs='git status'
alias gc='git commit'
alias gp='git push'
alias gob='go build'
alias gor='go run'

# Functions
zenfetch() {
    clear
    echo "================================================"
    figlet "Zen Unix" 2>/dev/null || echo "ZEN UNIX"
    echo "================================================"
    echo "ğŸ§  ARM64 Linux by Wildan Hermawan"
    echo "ğŸ“±  GitHub: https://github.com/sfiraz" 
    echo "ğŸš€  $(uname -srm)"
    echo "ğŸ’»  $(cat /etc/alpine-release 2>/dev/null || echo 'Musl Linux')"
    echo "ğŸ”§  $(go version 2>/dev/null || echo 'Go: Not installed')"
    echo "================================================"
}

# Welcome message
zenfetch
echo "Type 'zenfetch' to show system info"
echo "Available tools:"
echo "  ğŸ“ File: ls, find, bat, tree, fzf"
echo "  ğŸ”§ System: htop, neofetch, tmux, nano"
echo "  ğŸŒ Network: curl, wget, ssh, git"
echo "  ğŸ¹ Development: go, gcc, make, cmake"
echo "  ğŸ¨ Fun: figlet, lolcat, cmatrix"
EOF

        # Copy ke home user
        mkdir -p rootfs/home/wildan
        cp rootfs/root/.bashrc rootfs/home/wildan/
        chown -R 1000:1000 rootfs/home/wildan

        # Setup Go environment
        mkdir -p rootfs/home/{wildan,go}/{bin,src,pkg}
        echo '' >> rootfs/root/.bashrc
        echo '# Go development environment' >> rootfs/root/.bashrc
        echo 'export GOPATH=$HOME/go' >> rootfs/root/.bashrc
        echo 'export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin' >> rootfs/root/.bashrc

        echo "âœ… User environment configured"

    - name: Create sample applications
      run: |
        echo "ğŸ¹ Creating sample applications..."
        
        # Sample Go program
        mkdir -p rootfs/home/wildan/zen-hello
        cat > rootfs/home/wildan/zen-hello/main.go << 'EOF'
package main

import (
    "fmt"
    "runtime"
    "time"
)

func main() {
    fmt.Println("ğŸ§  Welcome to Zen Unix!")
    fmt.Println("ğŸ“±  ARM64 Linux by Wildan Hermawan")
    fmt.Println("ğŸŒ  GitHub: https://github.com/sfiraz")
    fmt.Printf("ğŸš€  OS: %s\n", runtime.GOOS)
    fmt.Printf("ğŸ’»  Arch: %s\n", runtime.GOARCH)
    fmt.Printf("â°  Time: %s\n", time.Now().Format("2006-01-02 15:04:05"))
    fmt.Println("âœ¨  Enjoy your Zen experience!")
}
EOF

        # Build sample Go program
        cp /usr/bin/qemu-aarch64-static rootfs/usr/bin/
        chmod +x rootfs/usr/bin/qemu-aarch64-static
        sudo chroot rootfs /usr/bin/go build -o /home/wildan/zen-hello/hello /home/wildan/zen-hello/main.go
        rm rootfs/usr/bin/qemu-aarch64-static

        # Create welcome script
        cat > rootfs/usr/local/bin/zen-welcome << 'EOF'
#!/bin/bash
echo "================================================"
echo "    ___    _   _   ___   _   _   ___"
echo "   |__ \\  | \\ | | |__ \\ | \\ | | / _ \\"
echo "      ) | |  \\| |    ) ||  \\| || | | |"
echo "     / /  | . \` |   / / | . \` || | | |"
echo "    / /_  | |\\  |  / /_ | |\\  || |_| |"
echo "   |____| |_| \\_| |____||_| \\_| \\___/"
echo "================================================"
echo "ğŸ§  Zen Unix - Minimal ARM64 Linux Distribution"
echo "ğŸ‘¨â€ğŸ’»  Created by: Wildan Hermawan"
echo "ğŸ”—  GitHub: https://github.com/sfiraz"
echo "ğŸ“§  Contact: wildan@zen-unix.dev"
echo "================================================"
EOF

        chmod +x rootfs/usr/local/bin/zen-welcome
        echo "âœ… Sample applications created"

    # ========== FINAL SYSTEM SETUP ==========
    - name: Create essential device nodes
      run: |
        echo "âš™ï¸ Creating essential device nodes..."
        
        sudo mknod rootfs/dev/console c 5 1
        sudo mknod rootfs/dev/null c 1 3
        sudo mknod rootfs/dev/zero c 1 5
        sudo mknod rootfs/dev/random c 1 8
        sudo mknod rootfs/dev/urandom c 1 9
        
        # TTY devices
        for i in 0 1 2 3 4 5 6 7 8 9; do
            sudo mknod rootfs/dev/tty$i c 4 $i 2>/dev/null || true
        done
        
        echo "âœ… Device nodes created"

    - name: Create bootable image
      run: |
        echo "ğŸ’¾ Creating bootable image..."
        
        # Create disk image
        dd if=/dev/zero of=output/zen-unix.img bs=1M count=512
        mkfs.ext4 -F output/zen-unix.img
        
        # Mount dan copy rootfs
        mkdir -p mnt
        sudo mount -o loop output/zen-unix.img mnt
        sudo cp -ra rootfs/* mnt/
        sudo umount mnt
        
        # Copy kernel
        cp linux-${{ env.KERNEL_VERSION }}/arch/arm64/boot/Image output/zen-kernel
        
        echo "âœ… Bootable image created"

    # ========== ARTIFACTS & TESTING ==========
    - name: Create documentation
      run: |
        echo "ğŸ“ Creating documentation..."
        
        cat > output/README.md << EOF
# ğŸ§ Zen Unix ${{ env.ZEN_VERSION }}

Minimal ARM64 Linux Distribution by Wildan Hermawan

## ğŸ“‹ Features

- **Kernel**: Linux ${{ env.KERNEL_VERSION }} (ARM64 optimized)
- **Libc**: musl ${{ env.MUSL_VERSION }} (static)
- **Shell**: Bash + BusyBox ${{ env.BUSYBOX_VERSION }}
- **Package Manager**: Alpine APK
- **Architecture**: AArch64 (ARM64)

## ğŸ›  Included Tools

### Core System
- bash, musl, busybox, alpine-base
- util-linux, e2fsprogs, kbd, kmod

### Development
- Go programming language
- build-base (gcc, make, binutils)
- cmake, pkgconfig, git

### Network Tools
- curl, wget, openssh, iproute2
- dhcpcd, dropbear, iptables

### CLI Productivity
- nano, htop, neofetch, tmux
- tree, bat, ripgrep, fd, fzf, jq

### Aesthetic & Fun
- figlet, lolcat, cmatrix

## ğŸš€ Quick Start

### Boot with QEMU:
\`\`\`bash
qemu-system-aarch64 \\
  -M virt -cpu cortex-a53 -smp 4 -m 2G \\
  -kernel zen-kernel \\
  -drive file=zen-unix.img,format=raw \\
  -append "console=ttyAMA0 root=/dev/vda rw init=/init" \\
  -nographic
\`\`\`

### Default Credentials
- Username: \`root\`
- Password: \`zen\` (if set)

## ğŸ”§ Usage Tips

1. Type \`zenfetch\` for system info
2. Use \`apk update && apk add <package>\` to install software
3. \`zen-welcome\` shows welcome message
4. Sample Go app: \`/home/wildan/zen-hello/hello\`

## ğŸ“ Support

- **Developer**: Wildan Hermawan
- **GitHub**: https://github.com/sfiraz
- **Email**: wildan@zen-unix.dev

## ğŸ“„ License

MIT License - Feel free to modify and distribute!
EOF

        echo "âœ… Documentation created"

    - name: Upload final artifacts
      uses: actions/upload-artifact@v4
      with:
        name: zen-unix-${{ env.ZEN_VERSION }}-${{ env.BUILD_ARCH }}
        path: |
          output/zen-unix.img
          output/zen-kernel
          output/README.md
        retention-days: 30
        compression-level: 9

    # ========== BUILD SUMMARY ==========
    - name: Show build summary
      run: |
        echo ""
        echo "ğŸ‰ ZEN UNIX BUILD COMPLETED SUCCESSFULLY!"
        echo "================================================"
        echo "ğŸ§  Zen Unix ${{ env.ZEN_VERSION }} - ARM64"
        echo "ğŸ‘¨â€ğŸ’»  By Wildan Hermawan"
        echo "ğŸ”—  GitHub: https://github.com/sfiraz"
        echo ""
        echo "ğŸ“¦ BUILD ARTIFACTS:"
        echo "   ğŸ’¾ zen-unix.img    - Root filesystem (512MB)"
        echo "   âš™ï¸  zen-kernel     - Linux kernel image"
        echo "   ğŸ“– README.md       - Documentation"
        echo ""
        echo "ğŸ“Š BUILD STATISTICS:"
        echo "   ğŸ—ï¸  Kernel: Linux ${{ env.KERNEL_VERSION }}"
        echo "   ğŸ“š Libc: musl ${{ env.MUSL_VERSION }}"
        echo "   ğŸ› ï¸  Tools: BusyBox ${{ env.BUILD_ARCH }}"
        echo "   ğŸ“¦ Packages: Alpine APK ecosystem"
        echo ""
        echo "ğŸš€ QUICK START:"
        echo "   Artifacts uploaded to GitHub Actions"
        echo "   Use QEMU to test: qemu-system-aarch64 ..."
        echo "   Flash to ARM64 device for production"
        echo ""
        echo "ğŸ”® NEXT STEPS:"
        echo "   1. Download artifacts from Actions tab"
        echo "   2. Test with QEMU or real hardware"
        echo "   3. Customize and extend for your needs"
        echo "   4. Share your improvements!"
        echo ""
        echo "âœ¨ Thank you for using Zen Unix!"
        echo "================================================"

    - name: Notify build completion
      run: |
        echo "âœ… Zen Unix build process completed at $(date)"
        echo "ğŸ“… Build timestamp: $(date -u +"%Y-%m-%dT%H:%M:%SZ")"
        echo "ğŸ§ Version: ${{ env.ZEN_VERSION }}"
        echo "ğŸ—ï¸ Architecture: ${{ env.BUILD_ARCH }}"
